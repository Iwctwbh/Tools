import{d as F,j as N,l as B,r as z,o as S,c as U,a as d,w as p,n as m,f as W,F as M}from"./index.0.20240428.2.js";function w(){}w.prototype={diff:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=r.callback;typeof r=="function"&&(f=r,r={}),this.options=r;var u=this;function o(v){return f?(setTimeout(function(){f(void 0,v)},0),!0):v}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var s=t.length,i=e.length,a=1,c=s+i;r.maxEditLength&&(c=Math.min(c,r.maxEditLength));var l=[{newPos:-1,components:[]}],y=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=s&&y+1>=i)return o([{value:this.join(t),count:t.length}]);function h(){for(var v=-1*a;v<=a;v+=2){var g=void 0,_=l[v-1],C=l[v+1],b=(C?C.newPos:0)-v;_&&(l[v-1]=void 0);var k=_&&_.newPos+1<s,I=C&&0<=b&&b<i;if(!k&&!I){l[v]=void 0;continue}if(!k||I&&_.newPos<C.newPos?(g=Z(C),u.pushComponent(g.components,void 0,!0)):(g=_,g.newPos++,u.pushComponent(g.components,!0,void 0)),b=u.extractCommon(g,t,e,v),g.newPos+1>=s&&b+1>=i)return o(H(u,g.components,t,e,u.useLongestToken));l[v]=g}a++}if(f)(function v(){setTimeout(function(){if(a>c)return f();h()||v()},0)})();else for(;a<=c;){var O=h();if(O)return O}},pushComponent:function(e,t,r){var f=e[e.length-1];f&&f.added===t&&f.removed===r?e[e.length-1]={count:f.count+1,added:t,removed:r}:e.push({count:1,added:t,removed:r})},extractCommon:function(e,t,r,f){for(var u=t.length,o=r.length,s=e.newPos,i=s-f,a=0;s+1<u&&i+1<o&&this.equals(t[s+1],r[i+1]);)s++,i++,a++;return a&&e.components.push({count:a}),e.newPos=s,i},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function H(n,e,t,r,f){for(var u=0,o=e.length,s=0,i=0;u<o;u++){var a=e[u];if(a.removed){if(a.value=n.join(r.slice(i,i+a.count)),i+=a.count,u&&e[u-1].added){var l=e[u-1];e[u-1]=e[u],e[u]=l}}else{if(!a.added&&f){var c=t.slice(s,s+a.count);c=c.map(function(h,O){var v=r[i+O];return v.length>h.length?v:h}),a.value=n.join(c)}else a.value=n.join(t.slice(s,s+a.count));s+=a.count,a.added||(i+=a.count)}}var y=e[o-1];return o>1&&typeof y.value=="string"&&(y.added||y.removed)&&n.equals("",y.value)&&(e[o-2].value+=y.value,e.pop()),e}function Z(n){return{newPos:n.newPos,components:n.components.slice(0)}}var G=new w;function Q(n,e,t){return G.diff(n,e,t)}function A(n,e){if(typeof n=="function")e.callback=n;else if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}var j=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,q=/\S/,V=new w;V.equals=function(n,e){return this.options.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n===e||this.options.ignoreWhitespace&&!q.test(n)&&!q.test(e)};V.tokenize=function(n){for(var e=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&j.test(e[t])&&j.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};function X(n,e,t){return t=A(t,{ignoreWhitespace:!0}),V.diff(n,e,t)}function Y(n,e,t){return V.diff(n,e,t)}var E=new w;E.tokenize=function(n){var e=[],t=n.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var r=0;r<t.length;r++){var f=t[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=f:(this.options.ignoreWhitespace&&(f=f.trim()),e.push(f))}return e};function K(n,e,t){return E.diff(n,e,t)}function P(n,e,t){var r=A(t,{ignoreWhitespace:!0});return E.diff(n,e,r)}var R=new w;R.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};function ee(n,e,t){return R.diff(n,e,t)}var $=new w;$.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function te(n,e,t){return $.diff(n,e,t)}function J(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?J=function(e){return typeof e}:J=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(n)}var ne=Object.prototype.toString,x=new w;x.useLongestToken=!0;x.tokenize=E.tokenize;x.castInput=function(n){var e=this.options,t=e.undefinedReplacement,r=e.stringifyReplacer,f=r===void 0?function(u,o){return typeof o>"u"?t:o}:r;return typeof n=="string"?n:JSON.stringify(D(n,null,null,f),f,"  ")};x.equals=function(n,e){return w.prototype.equals.call(x,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function L(n,e,t){return x.diff(n,e,t)}function D(n,e,t,r,f){e=e||[],t=t||[],r&&(n=r(f,n));var u;for(u=0;u<e.length;u+=1)if(e[u]===n)return t[u];var o;if(ne.call(n)==="[object Array]"){for(e.push(n),o=new Array(n.length),t.push(o),u=0;u<n.length;u+=1)o[u]=D(n[u],e,t,r,f);return e.pop(),t.pop(),o}if(n&&n.toJSON&&(n=n.toJSON()),J(n)==="object"&&n!==null){e.push(n),o={},t.push(o);var s=[],i;for(i in n)n.hasOwnProperty(i)&&s.push(i);for(s.sort(),u=0;u<s.length;u+=1)i=s[u],o[i]=D(n[i],e,t,r,i);e.pop(),t.pop()}else o=n;return o}var T=new w;T.tokenize=function(n){return n.slice()};T.join=T.removeEmpty=function(n){return n};const ie=W("h1",{class:"title"}," 文本对比 WordCompare ",-1),re=W("pre",{id:"preDiffOut",style:{overflow:"auto","min-height":"630px","max-height":"630px",border:"#dcdfe6 solid 1px",padding:"5px 11px",margin:"0"}},null,-1),oe=W("p",null,[m(" 源码参考: "),W("a",{href:"https://github.com/kpdecker/jsdiff",target:"_blank"},"jsdiff")],-1),se=F({__name:"WordCompare",setup(n){const e=N(""),t=N(""),r=N("diffLines");let f=[];B([e,t,r],()=>{f=[];let o;switch(r.value){case"diffLines":o=K(e.value,t.value);break;case"diffWords":o=X(e.value,t.value);break;case"diffChars":o=Q(e.value,t.value);break;case"diffJson":o=L(e.value,t.value);break;case"diffJsonWithSort":try{let i=JSON.stringify(JSON.parse(e.value),(c,l)=>typeof l!="object"?l:u(l),4),a=JSON.stringify(JSON.parse(t.value),(c,l)=>typeof l!="object"?l:u(l),4);o=L(i,a)}catch{o=L(e.value,t.value)}break;case"diffJsonWithoutValue":try{let i=JSON.stringify(JSON.parse(e.value),(c,l)=>typeof l!="object"?"":Array.isArray(l)?l:u(l),4),a=JSON.stringify(JSON.parse(t.value),(c,l)=>typeof l!="object"?"":Array.isArray(l)?l:u(l),4);o=L(i,a)}catch{o=L(e.value,t.value)}break;case"diffCss":o=te(e.value,t.value);break;case"diffSentences":o=ee(e.value,t.value);break;case"diffTrimmedLines":o=P(e.value,t.value);break;case"diffWordsWithSpace":o=Y(e.value,t.value);break}o==null||o.forEach(i=>{i.removed?f.push('<del title="删除的部分">'+i.value+"</del>"):i.added?f.push('<ins title="新增的部分">'+i.value+"</ins>"):f.push('<span title="没有改动的部分">'+i.value+"</span>")});let s=document.getElementById("preDiffOut");s&&(s.innerHTML=f.join(""))});const u=o=>{const s={};return Object.keys(o).sort().forEach(i=>{s[i]=o[i]}),s};return(o,s)=>{const i=z("el-radio"),a=z("el-radio-group"),c=z("el-col"),l=z("el-input"),y=z("el-row");return S(),U(M,null,[ie,d(y,{style:{"max-height":"80%"}},{default:p(()=>[d(c,null,{default:p(()=>[d(a,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=h=>r.value=h)},{default:p(()=>[d(i,{label:"diffLines",size:"large"},{default:p(()=>[m("line")]),_:1}),d(i,{label:"diffWords",size:"large"},{default:p(()=>[m("word")]),_:1}),d(i,{label:"diffChars",size:"large"},{default:p(()=>[m("char")]),_:1}),d(i,{label:"diffJson",size:"large"},{default:p(()=>[m("json")]),_:1}),d(i,{label:"diffJsonWithSort",size:"large"},{default:p(()=>[m("jsonWithSort")]),_:1}),d(i,{label:"diffJsonWithoutValue",size:"large"},{default:p(()=>[m("jsonWithoutValue")]),_:1}),d(i,{label:"diffCss",size:"large"},{default:p(()=>[m("css")]),_:1}),d(i,{label:"diffSentences",size:"large"},{default:p(()=>[m("sentence")]),_:1}),d(i,{label:"diffTrimmedLines",size:"large"},{default:p(()=>[m("trimmedLine")]),_:1}),d(i,{label:"diffWordsWithSpace",size:"large"},{default:p(()=>[m("wordWithSpace")]),_:1})]),_:1},8,["modelValue"])]),_:1}),d(c,{lg:8},{default:p(()=>[W("div",null,[d(l,{id:"textareaIn",modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=h=>e.value=h),autosize:{minRows:30,maxRows:30},placeholder:"Please input text",type:"textarea"},null,8,["modelValue"])])]),_:1}),d(c,{lg:8},{default:p(()=>[d(l,{id:"textareaOut",modelValue:t.value,"onUpdate:modelValue":s[2]||(s[2]=h=>t.value=h),autosize:{minRows:30,maxRows:30},placeholder:"Please input text",type:"textarea"},null,8,["modelValue"])]),_:1}),d(c,{lg:8},{default:p(()=>[re]),_:1})]),_:1}),d(y,{style:{"justify-content":"center"}},{default:p(()=>[d(c,{span:"5",style:{"text-align":"center"}},{default:p(()=>[oe]),_:1})]),_:1})],64)}}});export{se as default};
